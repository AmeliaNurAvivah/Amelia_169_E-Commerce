{% extends "/layouts/base.html" %}
{% block content %}

<style>
  .card {
    background: #1B1B1B;
    border-radius: 12px;
    padding: 25px 20px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.5);
    margin-bottom: 20px;
  }

  .page-title {
    font-size: 28px;
    color: #1E90FF;
    margin-bottom: 20px;
  }

  .form-card {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    margin-bottom: 20px;
  }

  .input-dark, select {
    padding: 10px 12px;
    border-radius: 6px;
    border: 1px solid #33334d;
    background: #1A1A28;
    color: #E0E0E0;
    flex: 1 1 200px;
    transition: border-color 0.2s, box-shadow 0.2s;
  }

  .input-dark:focus, select:focus {
    border-color: #1E90FF;
    box-shadow: 0 0 5px rgba(30,144,255,0.5);
    outline: none;
  }

  .btn-dashboard, .btn-action {
    padding: 8px 16px;
    background: #1E90FF;
    color: #fff;
    border-radius: 6px;
    font-weight: 500;
    text-decoration: none;
    margin-right: 8px;
    transition: background 0.2s, transform 0.1s;
    cursor: pointer;
    border: none;
  }

  .btn-dashboard:hover, .btn-action:hover {
    background: #1565C0;
    transform: translateY(-1px);
  }

  .btn-dashboard:active, .btn-action:active {
    transform: translateY(1px);
  }

  .table-container {
    overflow-x: auto;
  }

  .table-dark {
    width: 100%;
    border-collapse: collapse;
    color: #E0E0E0;
  }

  .table-dark th, .table-dark td {
    padding: 12px 15px;
    text-align: left;
    border-bottom: 1px solid #2e2e2e;
  }

  .table-dark th {
    background: #1E90FF;
    color: #fff;
    font-weight: 600;
  }

  .table-dark tr:nth-child(even) {
    background: #1A1A28;
  }

  .table-dark tr:hover {
    background: #33334d;
  }

  .input-dark-small {
    padding: 6px 8px;
    border-radius: 4px;
    border: 1px solid #33334d;
    background: #1A1A28;
    color: #E0E0E0;
    width: 150px;
    transition: border-color 0.2s, box-shadow 0.2s;
  }

  .input-dark-small:focus {
    border-color: #1E90FF;
    box-shadow: 0 0 4px rgba(30,144,255,0.4);
    outline: none;
  }
</style>

<div class="card">

  <h3 class="page-title">Data Kelas</h3>

  <!-- Form Tambah Kelas -->
  <form action="{{ url_for('main.kelas_tambah') }}" method="post" class="form-card">
    <input class="input-dark" name="nama" placeholder="Nama Kelas" required>
    <select name="matakuliah_id" class="input-dark" required>
      <option value="">Pilih Mata Kuliah</option>
      {% for mk in matakuliah %}
      <option value="{{ mk.id }}">{{ mk.nama }}</option>
      {% endfor %}
    </select>
    <select name="dosen_id" class="input-dark" required>
      <option value="">Pilih Dosen</option>
      {% for d in dosen %}
      <option value="{{ d.id }}">{{ d.nama }}</option>
      {% endfor %}
    </select>
    <button type="submit" class="btn-dashboard">Tambah</button>
  </form>

  <!-- Tabel -->
  <div class="table-container">
    <table class="table-dark">
      <thead>
        <tr>
          <th>ID</th>
          <th>Nama Kelas</th>
          <th>Mata Kuliah</th>
          <th>Dosen</th>
          <th>Aksi</th>
        </tr>
      </thead>
      <tbody>
        {% for k in data %}
        <tr>
          <td>{{ k.id }}</td>
          <td>
            <form action="{{ url_for('main.kelas_edit', kelas_id=k.id) }}" method="post" style="display:inline-flex; gap:5px;">
              <input class="input-dark-small" type="text" name="nama" value="{{ k.nama }}">
          </td>
          <td>
              <select name="matakuliah_id" class="input-dark-small">
                {% for mk in matakuliah %}
                <option value="{{ mk.id }}" {% if mk.id == k.matakuliah_id %}selected{% endif %}>{{ mk.nama }}</option>
                {% endfor %}
              </select>
          </td>
          <td>
              <select name="dosen_id" class="input-dark-small">
                {% for d in dosen %}
                <option value="{{ d.id }}" {% if d.id == k.dosen_id %}selected{% endif %}>{{ d.nama }}</option>
                {% endfor %}
              </select>
          </td>
          <td>
              <button type="submit" class="btn-action">Simpan</button>
            </form>
            <a href="{{ url_for('main.kelas_hapus', kelas_id=k.id) }}" class="btn-action" onclick="return confirm('Yakin ingin hapus kelas ini?')">Hapus</a>
          </td>
          <td><a href="{{ url_for('main.kelas_detail', kelas_id=k.id) }}"
   class="btn-action">
   Detail
</a></td>
        </tr>
        
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

{% endblock %}
